version: '3.8'
services:
  mongo:
    container_name: 'mongo'
    build: ./db
    # volumes:
    #   - 'data:/data/db'
    ports:
      - 27017:27017
  api:
    container_name: 'api'
    build: ./api
    volumes:
      - ./api:/go/src/api
    ports:
      - 8000:8000
    links:
      - mongo
  client:
    container_name: 'client'
    build: ./client
    volumes:
      - ./client/src:/client/src
    ports:
      - 3000:3000
    links:
      - api
# for production
  # proxy: 
  #   container_name: 'proxy'
  #   image: nginx:latest
  #   volumes: # mount custom config at runtime 
  #     - ./nginx.conf:/etc/nginx/conf.d/default.conf 
  #   links:
  #     - client
  #     - api
  #   ports: 
  #     - 80:8080
